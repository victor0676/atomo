<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Generador de QR — Átomo de Oxígeno 3D</title>
  <style>
    body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto; background:#0b1220; color:#e5e7eb; padding: 24px; }
    .card { max-width: 760px; margin: 0 auto; background: rgba(2,6,23,.7); border:1px solid rgba(148,163,184,.25); border-radius: 16px; padding: 20px; }
    input[type="text"]{ width:100%; padding:12px; border-radius:12px; border:1px solid rgba(148,163,184,.35); background:#111827; color:#e5e7eb; }
    label { display:block; margin-top:12px; font-size:14px; opacity:.9 }
    .row{ display:flex; gap:12px; flex-wrap:wrap; margin-top:12px; }
    .btn{ background:#0ea5e9; border:1px solid #38bdf8; color:#001018; padding:10px 14px; border-radius:12px; cursor:pointer; font-weight:700; }
    #qrcode{ background:white; padding:12px; display:inline-block; border-radius:12px; }
    small{ opacity:.8 }
  </style>
</head>
<body>
  <div class="card">
    <h1>Generar código QR</h1>
    <p>1) Sube la carpeta <b>atomo-oxigeno</b> a tu hosting (p.ej. GitHub Pages, Netlify, tu servidor) y copia la URL pública de <code>/index.html</code>.<br>
    2) Pega la URL abajo y presiona <b>Generar</b> para crear un QR listo para imprimir.</p>
    <label for="url">URL pública de tu visor 3D:</label>
    <input type="text" id="url" placeholder="https://tudominio.com/atomo-oxigeno/index.html" value="https://example.com/atomo-oxigeno/index.html" />
    <div class="row">
      <button class="btn" id="make">Generar</button>
      <a id="downloadPng" class="btn" download="qr_atomo_oxigeno.png">Descargar PNG</a>
      <a id="downloadSvg" class="btn" download="qr_atomo_oxigeno.svg">Descargar SVG</a>
    </div>
    <div style="margin-top:16px;">
      <div id="qrcode"></div>
    </div>
    <p><small>Usa un acortador de enlaces si tu URL es muy larga.</small></p>
  </div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js" integrity="sha512-MrJ7Q0v0CSeK4eQ0bW3zH2c9x5yJpW3t6C1m0XkM8lH5rJ5e1gkQ3wCkL7Wn7s9fS4J6cL2o3bOxmF2yN2R2/A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script>
    const qre = document.getElementById('qrcode');
    const urlInput = document.getElementById('url');
    const makeBtn = document.getElementById('make');
    const dlPng = document.getElementById('downloadPng');
    const dlSvg = document.getElementById('downloadSvg');

    let qr = null;
    function makeQR(){
      qre.innerHTML = '';
      qr = new QRCode(qre, {
        text: urlInput.value.trim(),
        width: 320, height: 320, correctLevel: QRCode.CorrectLevel.H
      });
      // Preparar descarga PNG
      setTimeout(()=>{
        const img = qre.querySelector('img');
        if (img && img.src){
          dlPng.href = img.src;
        }
      }, 200);

      // Preparar descarga SVG (reconstruir como SVG vectorial)
      const txt = urlInput.value.trim();
      // Sencillo generador SVG usando path de módulos (del canvas interno)
      // Nota: qrcodejs no expone directamente el mapa; para simplicidad, usamos la imagen PNG para vista rápida
      dlSvg.addEventListener('click', (e)=>{
        e.preventDefault();
        alert('Para SVG vectorial perfecto te recomiendo https://www.qrcode-monkey.com/ con el mismo enlace.');
      }, { once:true });
    }

    makeBtn.addEventListener('click', makeQR);
    makeQR();
  </script>
</body>
</html>
